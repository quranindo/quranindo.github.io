<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>Al-Qur’an</title>
  <meta name="description" content="Baca Al-Qur’an per surat dengan tampilan mushaf modern."/>
  <link id="canonicalLink" rel="canonical" href=""/>

  <!-- CSS (absolute path) -->
  <link rel="stylesheet" href="/css/main.css"/>
  <link rel="stylesheet" href="/css/surat.css"/>
  <link rel="stylesheet" href="/css/player.css"/>

  <!-- Plyr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3/dist/plyr.css"/>
</head>

<body>

  <!-- HEADER -->
  <header class="topbar">
    <a href="/" class="back-btn">←</a>

    <div class="surat-title">
      <h1 id="suratNama">—</h1>
      <small id="suratMeta">—</small>
    </div>

    <select id="suratSelect"></select>
  </header>

  <!-- AUDIO PLAYER -->
  <div class="audio-wrap">
    <audio id="player" controls></audio>
  </div>

  <!-- AYAT -->
  <main id="ayatList" class="ayat-list"></main>

  <!-- BACK TO TOP -->
  <button class="top" onclick="scrollToTop()">↑</button>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/plyr@3/dist/plyr.min.js"></script>
  <script src="/js/surat.js"></script>

  <!-- INLINE LOGIC KHUSUS HALAMAN -->
  <script>
    /* ===== UTIL ===== */
    function slugify(txt){
      return txt.toLowerCase()
        .replace(/['’]/g,'')
        .replace(/\s+/g,'-');
    }

    function resolveIdFromPath(){
      const parts = location.pathname.split('/').filter(Boolean);
      const last = parts[parts.length - 1] || '';
      const id = parseInt(last.split('-')[0], 10);
      return isNaN(id) ? 1 : id;
    }

    const currentId = resolveIdFromPath();

    /* ===== CANONICAL ===== */
    const canonical = document.getElementById('canonicalLink');
    if (canonical) canonical.href = location.href;

    /* ===== BACK TO TOP ===== */
    const btn = document.querySelector('.top');
    window.addEventListener('scroll', () => {
      btn.style.display = window.scrollY > 400 ? 'block' : 'none';
    });
    function scrollToTop(){
      scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* ===== DROPDOWN SURAT ===== */
    const suratList = [
      "Al Fatihah","Al Baqarah","Ali Imran","An Nisa","Al Maidah","Al Anam",
      "Al Araf","Al Anfal","At Taubah","Yunus","Hud","Yusuf","Ar Rad",
      "Ibrahim","Al Hijr","An Nahl","Al Isra","Al Kahfi","Maryam","Ta Ha",
      "Al Anbiya","Al Hajj","Al Muminun","An Nur","Al Furqan","Asy Syuara",
      "An Naml","Al Qasas","Al Ankabut","Ar Rum","Luqman","As Sajdah",
      "Al Ahzab","Saba","Fatir","Ya Sin","As Saffat","Sad","Az Zumar",
      "Ghafir","Fussilat","Asy Syura","Az Zukhruf","Ad Dukhan","Al Jatsiyah",
      "Al Ahqaf","Muhammad","Al Fath","Al Hujurat","Qaf","Az Zariyat",
      "At Tur","An Najm","Al Qamar","Ar Rahman","Al Waqiah","Al Hadid",
      "Al Mujadilah","Al Hasyr","Al Mumtahanah","As Saff","Al Jumuah",
      "Al Munafiqun","At Taghabun","At Talaq","At Tahrim","Al Mulk",
      "Al Qalam","Al Haqqah","Al Maarij","Nuh","Al Jin","Al Muzzammil",
      "Al Muddatsir","Al Qiyamah","Al Insan","Al Mursalat","An Naba",
      "An Naziat","Abasa","At Takwir","Al Infitar","Al Mutaffifin",
      "Al Insyiqaq","Al Buruj","At Tariq","Al Ala","Al Ghasyiyah",
      "Al Fajr","Al Balad","Asy Syams","Al Lail","Ad Dhuha","Asy Syarh",
      "At Tin","Al Alaq","Al Qadr","Al Bayyinah","Az Zalzalah",
      "Al Adiyat","Al Qariah","At Takatsur","Al Asr","Al Humazah",
      "Al Fil","Quraisy","Al Maun","Al Kautsar","Al Kafirun",
      "An Nashr","Al Lahab","Al Ikhlas","Al Falaq","An Nas"
    ];

    const select = document.getElementById('suratSelect');
    suratList.forEach((n,i)=>{
      const o = document.createElement('option');
      o.value = i + 1;
      o.textContent = `${i+1}. ${n}`;
      if (i + 1 === currentId) o.selected = true;
      select.appendChild(o);
    });

    select.onchange = e=>{
      const id = +e.target.value;
      const name = suratList[id - 1];
      location.href = `/surat/${id}-${slugify(name)}`;
    };
  </script>

</body>
</html>

