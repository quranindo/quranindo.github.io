<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Quran</title>

<link id="canonicalLink" rel="canonical" href="">
<meta name="description" content="Baca Al-Qur'an lengkap dengan teks Arab, terjemah Indonesia, dan murottal audio.">
<meta name="robots" content="index, follow">

<meta property="og:title" content="Al-Qur'an Digital 30 Juz">
<meta property="og:description" content="Al-Qur'an Digital 30 Juz lengkap dengan teks Arab, terjemah Indonesia, dan murottal audio.">
<meta property="og:image" content="/assets/img/cover.jpg">
<link rel="icon" href="/assets/img/favicon.ico">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#046260">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
<link rel="stylesheet" href="../../css/base.css">
<link rel="stylesheet" href="../../css/surat.css">
</head>

<body>

<header id="header-js">
<a href="/" class="back-btn">
  <svg width="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <polyline points="15 18 9 12 15 6"/>
  </svg> 
</a>
<button class="toggle" onclick="toggleDark()">üåô</button>
<h1>
  <img src="https://lh3.googleusercontent.com/d/1-Ufwu2QXVkDiVmHp0wr0tq4GUVUrEpH-=w100"
       width="100"
       height="43"
       alt="Al-Quranul Karim"
       loading="eager"
       decoding="async">
</h1>
</header>

<div class="top-container">
  <h2 id="titleLatin"></h2>
  <div id="titleArab" class="arab-title"></div>
  <div id="titleArti"></div>
  <div id="info" class="info"></div>
</div>

<div class="container">

<div class="navcon">
  <div class="nav">
    <button onclick="go(-1)"></button>
    <button onclick="go(1)"></button>
  </div>
</div>

<div class="surat-select-wrap">
  <select id="suratSelect"></select>
</div>

<div id="bismillah" class="bismillah"></div>
<div id="content"></div>

<div class="nav" id="navBottom">
  <button onclick="go(-1)"></button>
  <button onclick="go(1)"></button>
</div>

<div class="footer">
  <span>¬© <span id="year"></span></span>
  <a href="https://kangis.my.id" target="_blank">Kang Ismet</a> ‚Ä¢ Smart Media
</div>

</div>

<div class="player-wrap" id="playerWrap">
  <button class="close" onclick="closePlayer()" aria-label="Tutup player">
    <svg viewBox="0 0 24 24" width="20" height="20">
      <line x1="6" y1="6" x2="18" y2="18"/>
      <line x1="18" y1="6" x2="6" y2="18"/>
    </svg>
  </button>
  <audio id="player" controls></audio>
</div>

<button class="top" onclick="scrollToTop()">
  <svg viewBox="0 0 24 24"><path d="M6 15l6-6 6 6"></path></svg>
</button>

<script>
window.SURAT_ID = 1;
const suratList = [
  "Al-Fatihah","Al-Baqarah","Ali 'Imran","An-Nisa","Al-Ma'idah","Al-An'am","Al-A'raf","Al-Anfal","At-Taubah","Yunus",
  "Hud","Yusuf","Ar-Ra'd","Ibrahim","Al-Hijr","An-Nahl","Al-Isra","Al-Kahf","Maryam","Ta-Ha",
  "Al-Anbiya","Al-Hajj","Al-Mu'minun","An-Nur","Al-Furqan","Asy-Syu'ara","An-Naml","Al-Qasas","Al-Ankabut","Ar-Rum",
  "Luqman","As-Sajdah","Al-Ahzab","Saba","Fatir","Ya-Sin","As-Saffat","Sad","Az-Zumar","Ghafir",
  "Fussilat","Asy-Syura","Az-Zukhruf","Ad-Dukhan","Al-Jatsiyah","Al-Ahqaf","Muhammad","Al-Fath","Al-Hujurat","Qaf",
  "Az-Zariyat","At-Tur","An-Najm","Al-Qamar","Ar-Rahman","Al-Waqi'ah","Al-Hadid","Al-Mujadilah","Al-Hasyr","Al-Mumtahanah",
  "As-Saff","Al-Jumu'ah","Al-Munafiqun","At-Taghabun","At-Talaq","At-Tahrim","Al-Mulk","Al-Qalam","Al-Haqqah","Al-Ma'arij",
  "Nuh","Al-Jinn","Al-Muzzammil","Al-Muddaththir","Al-Qiyamah","Al-Insan","Al-Mursalat","An-Naba","An-Nazi'at","'Abasa",
  "At-Takwir","Al-Infitar","Al-Mutaffifin","Al-Insyiqaq","Al-Buruj","At-Tariq","Al-A'la","Al-Ghasyiyah","Al-Fajr","Al-Balad",
  "Asy-Syams","Al-Lail","Ad-Duha","Asy-Syarh","At-Tin","Al-'Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-'Adiyat",
  "Al-Qari'ah","At-Takatsur","Al-'Asr","Al-Humazah","Al-Fil","Quraisy","Al-Ma'un","Al-Kautsar","Al-Kafirun","An-Nasr",
  "Al-Lahab","Al-Ikhlas","Al-Falaq","An-Nas"
];

const select = document.getElementById("suratSelect");
suratList.forEach((n,i)=>{
  const o=document.createElement("option");
  o.value=i+1;
  o.textContent=`${i+1}. ${n}`;
  if(i+1===window.SURAT_ID)o.selected=true;
  select.appendChild(o);
});
select.onchange=e=>{
  const i=+e.target.value;
  location.href=`/surat/${i}-${slugify(suratList[i-1])}/`;
};
function slugify(n){return n.toLowerCase().replace(/['‚Äô]/g,'').replace(/\s+/g,'-');}
</script>

<script src="../../js/theme.js"></script>

<script>
const id = window.SURAT_ID;
const titleLatin=document.getElementById('titleLatin');
const titleArab=document.getElementById('titleArab');
const titleArti=document.getElementById('titleArti');
const info=document.getElementById('info');
const content=document.getElementById('content');
const bismillah=document.getElementById('bismillah');
const audio=document.getElementById('player');
const wrap=document.getElementById('playerWrap');
let ayatEls=[],currentIndex=-1,prevSurah=null,nextSurah=null,allSurah=[];

function playAyat(i){
  currentIndex=i;
  const file=`${String(id).padStart(3,'0')}${String(i+1).padStart(3,'0')}`;
  audio.src=`https://everyayah.com/data/Alafasy_64kbps/${file}.mp3`;
  wrap.classList.add('show');
  audio.play();
  highlight(i);
}

audio.addEventListener('ended',()=>{
  if(currentIndex<ayatEls.length-1)playAyat(currentIndex+1);
});

function closePlayer(){
  audio.pause();
  audio.src='';
  wrap.classList.remove('show');
}

function highlight(i){
  ayatEls.forEach(e=>e.classList.remove('active'));
  ayatEls[i]?.classList.add('active');
}

async function load(){
  allSurah=await(await fetch('https://equran.id/api/surat')).json();
  prevSurah=id>1?id-1:null;
  nextSurah=id<114?id+1:null;
  const s=await(await fetch(`https://equran.id/api/surat/${id}`)).json();
  titleLatin.textContent=`${s.nomor}. ${s.nama_latin}`;
  titleArab.textContent=s.nama;
  titleArti.textContent=`(${s.arti})`;
  info.textContent=`${s.jumlah_ayat} Ayat ‚Ä¢ ${s.tempat_turun}`;
  bismillah.textContent=(id!==1&&id!==9)?'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸëŸéŸáŸê ÿßŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê':'';
  content.innerHTML='';
  ayatEls=[];
  s.ayat.forEach((a,i)=>{
    const el=document.createElement('div');
    el.className='ayat';
    el.innerHTML=`<button class="play">‚ñ∂</button><div class="arab"><span>${a.ar}</span> €ù${toArabic(a.nomor)}</div><div class="arti">${a.idn}</div>`;
    el.querySelector('.play').onclick=()=>playAyat(i);
    content.appendChild(el);
    ayatEls.push(el);
  });
  function toArabic(n) {
  return n.toString().replace(/\d/g, d => 'Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©'[d]);
}
}
load();
</script>

<script>
let lastScroll=0;
const header=document.getElementById("header-js");
window.addEventListener("scroll",()=>{
  const c=window.pageYOffset;
  header.classList.toggle("hide",c>lastScroll&&c>80);
  lastScroll=c;
});
</script>

</body>
</html>
