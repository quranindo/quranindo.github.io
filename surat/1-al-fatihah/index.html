<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Quran</title>

<link id="canonicalLink" rel="canonical" href="">
<meta name="description" content="Baca Al-Qur'an lengkap dengan teks Arab, terjemah Indonesia, dan murottal audio.">
<meta name="robots" content="index, follow">

<meta property="og:title" content="Al-Qur'an Digital 30 Juz">
<meta property="og:description" content="Al-Qur'an Digital 30 Juz lengkap dengan teks Arab, terjemah Indonesia, dan murottal audio.">
<meta property="og:image" content="/assets/img/cover.jpg">
<link rel="icon" href="/assets/img/favicon.ico">

<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#046260">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
<link rel="stylesheet" href="../../css/base.css">
<link rel="stylesheet" href="../../css/surat.css">

<style>

.player-wrap{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
background:#fff;
border-radius:14px;
box-shadow:0 8px 30px rgba(0,0,0,.25);
padding:12px;
width:360px;
display:none;
z-index:9999;
}

.player-wrap.show{
display:block;
}

.player-header{
font-size:13px;
margin-bottom:6px;
font-weight:600;
}

.player-controls{
display:flex;
align-items:center;
gap:8px;
}

.player-controls button{
border:none;
background:none;
cursor:pointer;
padding:4px;
}

.player-controls svg{
stroke:#111;
fill:none;
stroke-width:2;
}

.seek{
flex:1;
}

.time{
font-size:12px;
min-width:40px;
text-align:center;
}

.volume{
width:70px;
}

</style>

</head>

<body>

<!-- SEMUA HTML ANDA TETAP SAMA -->

<div class="player-wrap" id="playerWrap">

<div class="player-header" id="playerTitle">
-
</div>

<audio id="player"></audio>

<div class="player-controls">

<button id="prevBtn">
<svg viewBox="0 0 24 24" width="22">
<path d="M6 6v12M18 6l-10 6 10 6"/>
</svg>
</button>

<button id="playBtn">
<svg id="playIcon" viewBox="0 0 24 24" width="26">
<path d="M8 5v14l11-7z"/>
</svg>
</button>

<button id="nextBtn">
<svg viewBox="0 0 24 24" width="22">
<path d="M18 6v12M6 6l10 6-10 6"/>
</svg>
</button>

<span class="time" id="currentTime">0:00</span>

<input type="range" class="seek" id="seekBar" value="0">

<span class="time" id="duration">0:00</span>

<input type="range"
class="volume"
id="volume"
min="0"
max="1"
step="0.01"
value="1">

<button onclick="closePlayer()">
<svg viewBox="0 0 24 24" width="22">
<path d="M6 6l12 12M18 6l-12 12"/>
</svg>
</button>

</div>
</div>


<script>

const audio  = document.getElementById('player');
const wrap   = document.getElementById('playerWrap');

const playBtn = document.getElementById("playBtn");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

const seekBar = document.getElementById("seekBar");
const volume  = document.getElementById("volume");

const currentTimeEl = document.getElementById("currentTime");
const durationEl    = document.getElementById("duration");
const titleEl       = document.getElementById("playerTitle");

playBtn.onclick = ()=>{
if(audio.paused){
audio.play();
}else{
audio.pause();
}
};

prevBtn.onclick = ()=>{
if(currentIndex>0)
playAyat(currentIndex-1);
};

nextBtn.onclick = ()=>{
if(currentIndex<ayatEls.length-1)
playAyat(currentIndex+1);
};

volume.oninput = ()=>{
audio.volume = volume.value;
};

audio.ontimeupdate = ()=>{

if(audio.duration){

seekBar.value =
(audio.currentTime/audio.duration)*100;

currentTimeEl.textContent =
formatTime(audio.currentTime);

durationEl.textContent =
formatTime(audio.duration);

}

};

seekBar.oninput = ()=>{
audio.currentTime =
(seekBar.value/100)*audio.duration;
};

audio.onplay = ()=>{
playBtn.innerHTML =
`<svg viewBox="0 0 24 24" width="26">
<path d="M6 5h4v14H6zM14 5h4v14h-4z"/>
</svg>`;
};

audio.onpause = ()=>{
playBtn.innerHTML =
`<svg viewBox="0 0 24 24" width="26">
<path d="M8 5v14l11-7z"/>
</svg>`;
};

function formatTime(sec){

sec = Math.floor(sec);

let m = Math.floor(sec/60);
let s = sec%60;

if(s<10) s="0"+s;

return m+":"+s;
}

function closePlayer(){

audio.pause();

wrap.classList.remove("show");

}

</script>


<script>

/* PATCH KE SISTEM ANDA TANPA REFACTOR */

const originalPlayAyat = playAyat;

playAyat = function(i){

originalPlayAyat(i);

wrap.classList.add("show");

titleEl.textContent =
suratList[id-1] + " â€¢ " + (i+1) + "/" + ayatEls.length;

};

</script>


</body>
</html>
